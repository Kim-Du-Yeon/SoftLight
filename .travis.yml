language: cpp


os:
  - osx
  - linux
  - windows



arch:
  - arm64
  - amd64



compiler:
  - gcc
  - clang


dist: bionic
osx_image: xcode11.2


addons:
  apt:
    update: true
    packages:
      - cmake
      - curl
      - git
      - x11-utils
      - libx11-dev
      - libx11-xcb-dev
      - libxext-dev
      - libxcb1-dev
      - libxcb-image0-dev
      - libxcb-shm0-dev
      - subversion
      - libassimp-dev
      - libfreeimage-dev
  homebrew:
    update: true
    packages:
      - assimp
      - freeimage
      - libxkbcommon
  chocolatey:
    packages:
      - tortoisesvn


install:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install mingw make tortoisesvn; fi


git:
  submodules: true


branches:
  only:
    - master


before_script:
  - git checkout master
  - git submodule init
  - git submodule foreach git checkout master
  - mkdir build
  - cd build
  - if [[ "$TRAVIS_OS_NAME" != "windows" ]]; then cmake .. -G'Unix Makefiles'; else cmake ..; fi


script:
  cmake --build . --config Release

