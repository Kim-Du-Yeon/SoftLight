language: cpp



os:
  - osx
  - linux
  - windows



compiler:
  - gcc
  - clang



dist: xenial
osx_image: xcode10.1
sudo: required



addons:
    apt:
        packages:
          - cmake
          - curl
          - git
          - libx11-dev
          - libx11-xcb-dev
          - x11-utils



git:
    submodules: true



branches:
    only:
      - master



before_script:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update          ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install freeimage assimp; fi
  - git checkout master
  - git submodule init
  - git submodule foreach git checkout master
  - mkdir build
  - cd build
  - if [[ "$TRAVIS_OS_NAME" != "windows" ]]; then cmake .. -G"Unix Makefiles"
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then cmake ..



script:
  if [[ "$TRAVIS_OS_NAME" != "windows" ]]; make; else cmake --build . --config RelWithDebInfo --parallel; fi

